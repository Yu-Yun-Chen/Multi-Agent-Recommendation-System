2025-12-02 07:33:42,200 - websocietysimulator - INFO - Start initializing Simulator
2025-12-02 07:33:42,200 - websocietysimulator - INFO - Using CacheInteractionTool
2025-12-02 07:33:42,200 - websocietysimulator - INFO - Initializing InteractionTool with data directory: /Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/data_processed
2025-12-02 07:33:43,094 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: paraphrase-MiniLM-L6-v2
2025-12-02 07:33:44,901 - websocietysimulator - INFO - Simulator initialized
2025-12-02 07:33:44,921 - websocietysimulator - INFO - Loaded 400 task-groundtruth pairs
2025-12-02 07:33:44,922 - websocietysimulator - INFO - Agent class set
2025-12-02 07:33:44,938 - websocietysimulator - INFO - ✓ Google embeddings: models/embedding-001
2025-12-02 07:33:44,938 - websocietysimulator - INFO - LLM set
2025-12-02 07:33:44,938 - websocietysimulator - INFO - Running simulation
2025-12-02 07:33:44,938 - websocietysimulator - INFO - Total tasks: 50
2025-12-02 07:33:44,949 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-12-02 07:33:45,059 - root - INFO - === Experiment config ===
2025-12-02 07:33:45,059 - root - INFO - Planning module: PlanningVoyagerCustom
2025-12-02 07:33:45,060 - root - INFO - Reasoning module: ReasoningIO
2025-12-02 07:33:45,060 - root - INFO - Memory module: MemoryDILU
2025-12-02 07:33:45,060 - root - INFO - Use pairwise rerank: True
2025-12-02 07:33:45,060 - root - INFO - ---- Task start ---- user_id=31606898c01676313ca73672815b7782  #cands=20
2025-12-02 07:33:52,187 - websocietysimulator - ERROR - Error calling schema_fitter: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/info_orchestrator_module.py", line 203, in _call_schema_fitter
    result = self.schema_fitter.build_profile(schema=schema, entity_id=entity_id, profile_type=profile_type, max_reviews=50)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 67, in build_profile
    profiles = self(schema=schema, items=items, profile_type=profile_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 125, in __call__
    raw_output = self.llm(messages=[{"role": "user", "content": prompt}], temperature=0.1)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/example/GoogleGeminiLLM.py", line 105, in __call__
    response = client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2025-12-02 07:33:52,200 - websocietysimulator - INFO - ✓ Batch 1/4 (items 1-5) using keys: ['genre', 'reading_level']
2025-12-02 07:33:54,396 - websocietysimulator - ERROR - Error calling schema_fitter: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/info_orchestrator_module.py", line 203, in _call_schema_fitter
    result = self.schema_fitter.build_profile(schema=schema, entity_id=entity_id, profile_type=profile_type, max_reviews=50)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 67, in build_profile
    profiles = self(schema=schema, items=items, profile_type=profile_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 125, in __call__
    raw_output = self.llm(messages=[{"role": "user", "content": prompt}], temperature=0.1)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/example/GoogleGeminiLLM.py", line 105, in __call__
    response = client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2025-12-02 07:33:57,669 - websocietysimulator - INFO - ✓ Batch 2/4 (items 6-10) using keys: ['genre', 'reading_level']
2025-12-02 07:34:02,920 - websocietysimulator - ERROR - Error calling schema_fitter: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/info_orchestrator_module.py", line 203, in _call_schema_fitter
    result = self.schema_fitter.build_profile(schema=schema, entity_id=entity_id, profile_type=profile_type, max_reviews=50)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 67, in build_profile
    profiles = self(schema=schema, items=items, profile_type=profile_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 125, in __call__
    raw_output = self.llm(messages=[{"role": "user", "content": prompt}], temperature=0.1)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/example/GoogleGeminiLLM.py", line 105, in __call__
    response = client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2025-12-02 07:34:03,395 - websocietysimulator - ERROR - Error calling schema_fitter: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
Traceback (most recent call last):
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/info_orchestrator_module.py", line 203, in _call_schema_fitter
    result = self.schema_fitter.build_profile(schema=schema, entity_id=entity_id, profile_type=profile_type, max_reviews=50)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 67, in build_profile
    profiles = self(schema=schema, items=items, profile_type=profile_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/websocietysimulator/agent/modules/schemafitter_module.py", line 125, in __call__
    raw_output = self.llm(messages=[{"role": "user", "content": prompt}], temperature=0.1)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/Documents/UCLA/CS245/coursework/AgentSocietyChallenge/example/GoogleGeminiLLM.py", line 105, in __call__
    response = client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 835, in generate_content
    response = rpc(
               ^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/hoshuhan/anaconda3/envs/websocietysimulator/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
2025-12-02 07:34:05,216 - websocietysimulator - INFO - ✓ Batch 3/4 (items 11-15) using keys: ['genre', 'reading_level']
